<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Web Playground</title>
    <!-- inline svg favicon to avoid /favicon.ico 404 noise -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect width='100%25' height='100%25' fill='%236be29a'/%3E%3Ctext x='50%25' y='50%25' font-size='9' dominant-baseline='middle' text-anchor='middle' fill='%23000500'%3EPR%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="src/css/reset.css">
    <link rel="stylesheet" href="src/css/styles.css">
    <!-- CodeMirror (v5) - editor assets (CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/addon/dialog/dialog.min.css">

    <style>
        /* ensure editor containers have height and look consistent */
        :root{--preview-width:420px;--accent:#6be29a;--bg:#0b1214}
        #editors { display:flex; gap:12px; height:60vh; }
        .editor { flex:1; min-height:200px; border-radius:8px; overflow:hidden; border:1px solid rgba(0,0,0,0.08); background: #111317 }
        .CodeMirror { height:100% !important; }
        /* layout tweak so preview is visible */
        main { display:grid; grid-template-columns: 1fr var(--preview-width); gap:12px; padding:14px; align-items:start; }
        #preview-container{display:flex;flex-direction:column;gap:8px}
        #live-preview{width:100%;height:60vh;border-radius:10px;border:1px solid rgba(0,0,0,0.08);box-shadow:0 12px 40px rgba(2,8,10,0.6)}
        /* toolbar */
        .toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.015),transparent);border:1px solid rgba(255,255,255,0.04);} 
        .toolbar .left{display:flex;align-items:center;gap:8px}
        .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e9f1f0;padding:8px 10px;border-radius:8px;cursor:pointer}
        .btn.primary{background:var(--accent);color:#062018;border:none}
        .status{font-size:13px;color:rgba(230,245,233,0.8)}
        .controls{display:flex;align-items:center;gap:8px}
        .toggle{display:inline-flex;align-items:center;gap:6px}

        /* splitter */
        #splitter{width:10px;cursor:col-resize;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:6px}

        /* console */
        .console{height:180px;border-radius:8px;overflow:auto;background:#071014;border:1px solid rgba(255,255,255,0.03);padding:8px;font-family:monospace;font-size:13px;color:#cdebdc}
        .console .log{padding:6px;border-bottom:1px dashed rgba(255,255,255,0.02)}

        /* responsive */
        @media (max-width:980px) { main { grid-template-columns:1fr; } #live-preview{height:36vh;} #splitter{display:none} }
    </style>
</head>
<body>
    <header>
        <h1>Advanced Web Playground</h1>
        <nav>
            <button id="btn-new-project" title="Create a new starter project">New Project</button>
            <button id="btn-import" title="Import project JSON">Import</button>
            <input type="file" id="import-file" accept="application/json" style="display:none">
            <button id="btn-export" title="Export project as JSON">Export</button>
            <button id="btn-reset" title="Reset saved project">Reset</button>
            <button id="btn-share" title="Create shareable link">Share</button>
        </nav>
    </header>
    <main>
        <div id="editor-container">
            <div class="toolbar" role="toolbar" aria-label="Editor toolbar">
                <div class="left">
                    <button class="btn primary" id="btn-run">Run</button>
                    <label class="toggle"><input type="checkbox" id="chk-autorun"> Auto-run</label>
                    <span class="status" id="autosave">Autosave: saved</span>
                </div>
                <div class="controls">
                    <button class="btn" id="btn-theme">Theme</button>
                    <button class="btn" id="btn-clear-console">Clear Console</button>
                </div>
            </div>
            <div id="file-tabs"></div>
            <div id="editors">
                <div id="html-editor" class="editor" aria-label="HTML editor"></div>
                <div id="css-editor" class="editor" aria-label="CSS editor"></div>
                <div id="js-editor" class="editor" aria-label="JavaScript editor"></div>
            </div>
        </div>
        <div id="splitter" title="Drag to resize" aria-hidden="true"></div>
        <div id="preview-container">
            <div class="toolbar" style="justify-content:space-between;align-items:center">
                <div style="font-weight:700">Live Preview</div>
                <div style="display:flex;gap:8px;align-items:center">
                    <div class="status" id="preview-status">Ready</div>
                    <button class="btn" id="btn-open-preview">Open in new tab</button>
                </div>
            </div>
            <iframe id="live-preview" title="Live preview"></iframe>
            <div class="console" id="console-logs" role="status" aria-live="polite"></div>
        </div>
    </main>
    <footer>
        <p>&copy; 2023 Advanced Web Playground</p>
    </footer>
    <div id="snackbar" aria-live="polite" style="position:fixed;right:18px;bottom:18px;z-index:9999;pointer-events:none"></div>

    <!-- CodeMirror JS (v5) - load before local editor initialization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/addon/dialog/dialog.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/addon/search/search.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/addon/search/searchcursor.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/addon/edit/closebrackets.min.js"></script>

    <script src="src/js/utils.js"></script>
    <script src="src/js/storage.js"></script>
    <script src="src/js/editors.js"></script>
    <script src="src/js/runner.js"></script>
    <script src="src/js/app.js"></script>
    <script src="src/js/ui.js"></script>
</body>
</html>